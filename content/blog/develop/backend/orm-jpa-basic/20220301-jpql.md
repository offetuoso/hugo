---
title: "JPA 객체지향 쿼리 언어(JPQL)"
image: "bg-jpa.png"
font_color: "white"
font_size: "28px"
opacity: "0.4"
date: 2022-03-01
slug: "JPA'"
description: "객체지향 쿼리 언어(JPQL)"	
keywords: ["ORM"]
draft: truel
categories: ["Java"]
subcategories: ["JPA"]
tags: ["Java","JPA","ORM", "인프런", "김영한", "자바 ORM 표준 JPA"]
math: false
toc: true
---

# 객체지향 쿼리 언어 (JPQL)
-------------------------------------

## 목차
-------------------------------------
> - 객체지향 커리 언어 소개
> - JPQL
> - 기본 문법과 기능
> - 패치 조인
> - 경로 표현식
> - 다형성 쿼리
> - 엔티티 직접 사용
> - Named 쿼리
> - 벌크 연산

## 객체지향 쿼리 언어 소개
-------------------------------------

### JPA에서 제공되는 다양한 쿼리 방법
--------------------------------------
> JPA에서는 실무에서 사용하기 위한 다양한 검색 조건과 Join을 사용하여 조회 등 복잡한 쿼리를 구현할 수 있도록 기능 다양한 쿼리 방법을 제공합니다.

> - <mark>JPQL</mark>
>	엔티티 객체를 조회하는 객체지향 쿼리다.

> - JPA Criteria 
> - <mark>QueryDSL</mark>
>	Java로 코드를 작성하여 JPQL로 제너레이션 하여 빌드하게 도와주는 클래스의 모음입니다.

> - 네이티브 SQL
> JPQL 외에 특정 데이터베이스에 종속적인 쿼리를 작성하고 사용해야할때 사용(MySql, Oracle.. 쿼리)

> - JDBC API 직접사용, Mybatis, SpringJdbcTemplate 함께 사용

### JPQL 
--------------------------------------

#### 소개

> - 가장 단순한 조회 방법
>	- EntityManager.find()
>	- 객체 그래프 탐색 (a.getB().getC())
> - <mark>나이가 18살 이상인 회원을 모두 검색 하고 싶다면 ?</mark>

#### JPQL -1

> - JPA를 사용하면 엔티티 객체를 중심으로 개발
> - 문제는 검색 쿼리
> - 검색을 할 때도 <mark>테이블이 아닌 엔티티 객체를 대상으로 검색</mark>
> - 모든 DB 데이터를 객체로 변환해서 검색하는 것은 불가능
> - 에플리케이션이 필요한 데이터만 DB에서 불러오면 결국 검색 조건이 포함된 SQL이 필요

#### JPQL -2

> - JPA는 SQL을 추상화한 JPQL이라는 객체 지향 쿼리 언어 제공
> - SQL과 문법 유사, SELECT, FROM, WHERE, GROUP BY, HAVING, JOIN 지원
> - JPQL은 엔티티 객체를 대상으로 쿼리
> - SQL은 데이터베이스 테이블을 대상으로 쿼리

#### JPQL 

```
	String jpql = "select m from Member m where m.name like '김%'";
	List<Member> result = em.createQuery(jpql, Member.class).getResultList();
```

![contact](/images/develop/backend/orm-jpa-basic/value-type-collection/img-004.png)



#### 전체 소스

<details title="펼치기/숨기기">
 	<summary> Address.java </summary>
 	
 	
     package relativemapping;

    import javax.persistence.Embeddable;
    import java.util.Objects;

    @Embeddable
    public class Address {
        private String city;
        private String street;
        private String zipcode;

        public Address() {
        }

        public Address(String city, String street, String zipcode) {
            this.city = city;
            this.street = street;
            this.zipcode = zipcode;
        }

        public String getCity() {
            return city;
        }

        private void setCity(String city) {
            this.city = city;
        }

        public String getStreet() {
            return street;
        }

        private void setStreet(String street) {
            this.street = street;
        }

        public String getZipcode() {
            return zipcode;
        }

        private void setZipcode(String zipcode) {
            this.zipcode = zipcode;
        }

        @Override
        public boolean equals(Object o) {
            if (this == o) return true;
            if (o == null || getClass() != o.getClass()) return false;
            Address address = (Address) o;
            return Objects.equals(city, address.city) && Objects.equals(street, address.street) && Objects.equals(zipcode, address.zipcode);
        }

        @Override
        public int hashCode() {
            return Objects.hash(city, street, zipcode);
        }
    }
 	
</details>

32:15



#### 참고
> - <a href="https://www.inflearn.com/course/ORM-JPA-Basic">자바 ORM 표준 JPA - 김영한</a>